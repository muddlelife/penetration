# http协议（超文本传输协议）

它允许将HTML（超文本标记语言）文档从Web服务器传送到Web浏览器

## http协议详解
1. http请求和响应

    * http请求(版本1.1)

        + http请求分为三个部分，请求行（请求方法），请求头（消息报头）和请求正文。请求头和请求正文之间有个空白行，表示请求头结束

        + 请求行由三部分组成

            请求方式（GET、POST等）、路径（不包括域名根目录）、http版本，只占第一行。

        + 请求头：从第二行到空白行之前都算是请求头。

        + 最后一行为请求正文，请求正文是*可选的*，他最常出现在post请求中。

        + 请求方法

            (1) get:用于获取请求页面的指定信息，如果请求资源为动态脚本，那么就会返回的是web容器经过解析后的HTML源代码

            (2) head:除了不能返回消息主体外，其他都与get相同

            (3) post:与get类似，区别是get没有请求内容，而post有请求内容，get有清请求数据长度的限制，而post没有，get请求会将发送的数据显示在*浏览器端*，而post不会，相比post更安全

            (4) put:用于请求服务器把请求中的实体存储在请求资源下，如果资源存在服务器，则会替换数据，资源不存在，则创建这个资源，而数据位于请求正文(一般情况，服务器都会关闭put请求，因为会创建文件)

            (5) delete:请求服务器删除请求的指定资源，服务器一般也会关闭这个方法

            (6) trace:激发一个远程的应用层的请求消息回路，回显服务器受到的请求

            (7) connect:为了用于能动态的切换到隧道的代理

            (8) options:为了请求获得由URL标识的资源在请求/响应的通信过程中可以使用的功能选项，通过这个方法，客户端可以在采取具体资源请求之前，决定对该资源采取何种必要措施，或者了解服务器的性能
        
    * http响应

        + http响应分为三个部分，响应行、响应头、响应体。响应头和响应体之间有个空白行，表示响应行结束

        + 响应行由三部分组成
          
            版本、状态码、消息

        + 响应头：从第二行到空白行之前都算是响应头

        + 响应正文：服务器向客户端发送的HTML数据(常出现现在post请求中)

        + http状态码(由三位数组成)

            (1) 1xx:信息提示，表示请求已经成功接受，继续处理，范围100～101

            (2) 2xx:成功，服务器成功处理了请求，范围200～206

            (3) 3xx:重定向，服务器告诉浏览器说资源被移动，给了新的url地址，浏览器重新得到地址向新的地址发起请求

            (4) 4xx:客户端错误状态码，客户端会向服务端发送一些无法处理的东西，比如请求一个不存在url，范围400～415

            (5) 5xx:web服务器自身出现问题，描述的是服务器内部错误，范围500～505

        + 常见状态码

            200:客户端请求成功

            302:重定向

            404:请求资源不存在

            400:客户端请求语法错误，不能被服务器所理解

            401:请求未经授权

            403:服务器收到请求，但拒绝提供服务

            500:服务器内部错误

            503:服务器当前不能处理客户端请求，一段时间可能恢复正常

2. http消息

    http消息又称为http头，由四部分组成，请求头、响应头、普通头、实体头

    * 请求头

      只出现在http请求中

      + 常见的请求头

          1. Host:主要用于指定被请求资源的Internet主机和端口号，HOST:www.xxser.com:801

          2. User-Agent:允许客户端将它的操作系统、浏览器和其他属性告诉服务器

          3. referer:包含一个url（代表访问url的上一个url）

          4. Cookie:一段文本，表示请求者身份

          5. range:可以请求实体的部分内容，多线程下载一定用到此请求头

          6. x-forward-for:即XXF头，代表请求端IP，可以有多个，用逗号隔开

          7. Accept:指定客户端接受哪些MIME类型的信息，如Accept:text/html，表明客户端希望接受HTML文本

          8. Accept-Charset用于指定客户端接收的字符集，如Accept-Charset:iso-8859-1

    * 响应头
      
        服务器根据请求向客户端发送的http头

        + 常见的响应头
          
            1. Server:服务器所使用的Web服务器名称，攻击者可查看此头探测Web服务器名称，建议服务器修改

            2. Set-Cookie:向客户端设置Cookie，通过查看此头，可以看到服务器向客户端发送的Cookie信息

            3. Last-Modified:服务器告诉浏览器，资源最后修改时间

            4. Location:通过这个头告诉浏览器去访问那个界面，常配合302状态码使用

            5. Refresh:告诉浏览器定时刷新页面

    * 普通头

        * Date:消息产生的日期和时间
        
        * Connection:允许发送指定连接的选项

        * Cathe-Control:用于指定缓存指令，缓存指令的单向的，且独立的

    * 实体头

        请求和响应消息都可以传送一个实体头，实体头定义了关于实体正文和请求所标识的资源的元信息（实体内容的属性），包括实体信息类型、长度、压缩方法、最后一次修改时间

        + 常见的实体头

            1. Content-Type:用于向接收方指示实体的介质类型

            2. Content-Encoding:用作媒体类型的修饰符，指示了已经被应用到实体正文的附加内容的编码，因此要获得Conten-Type报头域中所引用的媒体类型，必须采用响应的解码机制

            3. Content-Length:指明实体正文的长度，以字节方式存储的十进制数据来表示

            4. Last-Modified:指示资源的最后修改日期和时间
